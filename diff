<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SarasAI â€” Dark Hybrid Chatbot</title>
<style>
  :root{
    --bg:#0b0f13; --panel:#0f1418; --muted:#9aa6b2; --accent:#6ad1ff;
    --bubble-user:#153447; --bubble-bot:#111827; --bubble-radius:18px;
    --glass: rgba(255,255,255,0.03);
  }
  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Arial;background:linear-gradient(180deg,#030409 0%, #07101a 100%);color:#e6eef6}
  .container{max-width:820px;margin:28px auto;padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 6px 30px rgba(0,0,0,0.6);}
  header{display:flex;gap:12px;align-items:center;justify-content:space-between}
  h1{margin:0;font-size:20px;letter-spacing:0.2px}
  .sub{color:var(--muted);font-size:13px}
  .controls{display:flex;gap:8px;align-items:center}
  .select, .btn, .iconbtn {background:var(--panel);border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
  .iconbtn{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px}
  .chat-wrap{margin-top:14px;border-radius:10px;background:var(--glass);padding:14px;height:480px;overflow:auto;border:1px solid rgba(255,255,255,0.02)}
  .messages{display:flex;flex-direction:column;gap:10px}
  .msg{max-width:78%;padding:10px 14px;border-radius:var(--bubble-radius);line-height:1.3;word-break:break-word;}
  .msg.user{align-self:flex-end;background:linear-gradient(180deg,var(--bubble-user),#0b3240);color:#e6f7ff;border-bottom-right-radius:6px;border-bottom-left-radius:18px}
  .msg.bot{align-self:flex-start;background:linear-gradient(180deg,var(--bubble-bot),#0b1420);color:#dff3ff;border-bottom-left-radius:6px;border-bottom-right-radius:18px}
  .meta{font-size:12px;color:var(--muted);margin-bottom:6px}
  footer{display:flex;gap:8px;align-items:center;margin-top:12px}
  input[type="text"]{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:#08121a;color:#e8f6ff}
  .small{font-size:13px;color:var(--muted)}
  .personality {display:flex;gap:8px;align-items:center;}
  .personality label{cursor:pointer;padding:6px 8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.02);color:var(--muted)}
  .activeP{background:linear-gradient(90deg,#143b4a,#0c2e3a);color:#bff0ff;border:1px solid rgba(106,209,255,0.15)}
  .row{display:flex;gap:8px;align-items:center}
  .note{margin-top:8px;color:var(--muted);font-size:13px}
  .tiny{font-size:12px;color:var(--muted)}
  .mic-on{box-shadow:0 0 8px rgba(106,209,255,0.06);border:1px solid rgba(106,209,255,0.12)}
</style>
</head>
<body>
<div class="container" role="application" aria-label="SarasAI chat">
  <header>
    <div>
      <h1>âœ¨ SarasAI â€” Dark Hybrid Chatbot</h1>
      <div class="sub">Voice + Text â€¢ Bubbles â€¢ Choose Personality</div>
    </div>
    <div class="controls">
      <div class="tiny">Voice Reply</div>
      <button id="toggleSpeak" class="btn small" title="Toggle voice replies">ON</button>
    </div>
  </header>

  <div class="row" style="margin-top:12px;gap:12px;align-items:center">
    <div>
      <div class="tiny">Personality:</div>
      <div id="personalityBar" class="personality" role="tablist" aria-label="Choose personality">
        <label data-p="lovely" class="activeP">Lovely</label>
        <label data-p="teacher">Teacher</label>
        <label data-p="funny">Funny</label>
        <label data-p="caring">Caring</label>
      </div>
    </div>
    <div style="margin-left:auto">
      <button id="clearBtn" class="btn tiny">Clear chat</button>
    </div>
  </div>

  <div id="chat-wrap" class="chat-wrap" aria-live="polite">
    <div id="messages" class="messages">
      <div class="meta">SarasAI ready â€” choose personality and speak or type below.</div>
    </div>
  </div>

  <footer>
    <button id="micBtn" class="iconbtn" title="Start voice input">ðŸŽ¤</button>
    <input id="input" type="text" placeholder="Type a message or press the mic to speak">
    <button id="sendBtn" class="btn">Send</button>
  </footer>

  <div class="note">Tip: Click the mic (ðŸŽ¤) to speak. Toggle "Voice Reply" to enable voice responses. Works in modern Chrome/Edge. If voice not supported, chat still works as text-only.</div>
</div>

<script>
/* ======= Simple rule-based QA + personality modifiers (no external services) ======= */
const qa = [
  {q:["hello","hi","hey"], a:"Hello! How can I help you today?"},
  {q:["your name"], a:"I am SarasAI."},
  {q:["who created you","creator"], a:"I was created by Mamatha."},
  {q:["hours","timing","open"], a:"SarasAI is available 24/7."},
  {q:["bye","goodbye","see you"], a:"Goodbye! Come back soon."},
  {q:["help","how to use"], a:"Type a question or press the mic and speak. I can reply with voice too."}
];

const messagesEl = document.getElementById('messages');
const inputEl = document.getElementById('input');
const sendBtn = document.getElementById('sendBtn');
const micBtn = document.getElementById('micBtn');
const clearBtn = document.getElementById('clearBtn');
const toggleSpeak = document.getElementById('toggleSpeak');
const personalityBar = document.getElementById('personalityBar');

let voiceReply = true;
let currentPersona = 'lovely';

/* Personality transform: adjust wording and emoji/style */
function personaModify(text, persona){
  const p = persona || currentPersona;
  if(p==='lovely'){
    return text.replace(/SarasAI/g,'SarasAI ðŸ’™').replace(/I /,'I ').replace(/\?$/,'? ðŸ˜Š');
  }
  if(p==='teacher'){
    return "ðŸ“š Teacher SarasAI: " + text;
  }
  if(p==='funny'){
    return text + " ðŸ˜„ (just kidding!)";
  }
  if(p==='caring'){
    return "ðŸ’– " + text + " â€” take care!";
  }
  return text;
}

function findAnswer(userText){
  const t = userText.toLowerCase()
